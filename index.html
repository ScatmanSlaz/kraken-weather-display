<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kraken Weather Display</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #0c0c0c;
      font-family: 'Segoe UI', sans-serif;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 240px;
      width: 240px;
      overflow: hidden;
    }
    .weather-ring {
      position: relative;
      width: 240px;
      height: 240px;
      border-radius: 50%;
      background: conic-gradient(#fff 0% 0%, #333 0% 100%);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .weather-inner {
      position: absolute;
      background: #0c0c0c;
      border-radius: 50%;
      width: 200px;
      height: 200px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .condition {
      font-size: 18px;
      font-weight: 600;
    }
    .temp {
      font-size: 48px;
      font-weight: bold;
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <div class="weather-ring" id="ring">
    <div class="weather-inner">
      <div class="condition" id="currentCondition">Clear</div>
      <div class="temp" id="currentTemp">66Â°F</div>
    </div>
  </div>

  <script>
    function calculateTemperatureColor(tempF) {
      // ðŸ”§ NEW: Normalize between -20Â°F and 110Â°F
      const minTemp = -20;
      const maxTemp = 110;
      const clamped = Math.max(minTemp, Math.min(maxTemp, tempF));
      const percent = (clamped - minTemp) / (maxTemp - minTemp);

      // Define gradient zones: white -> blue -> red
      let r, g, b;
      if (percent < 0.4) {
        // White to Blue
        const p = percent / 0.4;
        r = 255 * (1 - p);
        g = 255 * (1 - p);
        b = 255;
      } else {
        // Blue to Red
        const p = (percent - 0.4) / 0.6;
        r = 255 * p;
        g = 0;
        b = 255 * (1 - p);
      }

      return `rgb(${Math.round(r)}, ${Math.round(g)}, ${Math.round(b)})`;
    }

    function updateWeatherDisplay(tempF, condition) {
      document.getElementById('currentTemp').textContent = `${tempF}Â°F`;
      document.getElementById('currentCondition').textContent = condition;
      const ring = document.getElementById('ring');
      const color = calculateTemperatureColor(tempF);
      ring.style.background = `conic-gradient(${color} 0% 25%, #333 25% 100%)`;
    }

    // ðŸ”§ NEW: Example call, replace with your own live data fetch logic
    const exampleTemp = 0;
    const exampleCondition = "Liquid";
    updateWeatherDisplay(exampleTemp, exampleCondition);
  </script>
</body>
</html>
